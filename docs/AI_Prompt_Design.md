# StockWise AI æç¤ºè¯åŠ JSON ç»“æž„è®¾è®¡

## ðŸ“Œ é¡¹ç›®åˆå¿ƒ

StockWise çš„å®šä½æ˜¯ **â€œäº¤æ˜“è€…çš„ç†æ€§é”šç‚¹â€**ã€‚AI çš„ä½œç”¨ä¸æ˜¯å‘Šè¯‰ç”¨æˆ·è‚¡ç¥¨ä¸€å®šä¼šæ¶¨è¿˜æ˜¯è·Œï¼Œè€Œæ˜¯åŸºäºŽå½“å‰çš„æŠ€æœ¯æŒ‡æ ‡å’Œç”¨æˆ·æŒä»“æƒ…å†µï¼Œæä¾›ä¸€å¥—**å¯æ‰§è¡Œã€å¯éªŒè¯**çš„çºªå¾‹å»ºè®®ã€‚

---

## ðŸŽ¯ å»ºè®®åˆ†ç±»é€»è¾‘

æˆ‘ä»¬å°† AI å»ºè®®åˆ†ä¸ºä¸‰ç§ç±»åž‹ï¼Œä»¥å®žçŽ°æœ€å¤§çš„ä¸ªæ€§åŒ–ï¼š

| ç±»åž‹         | æ ‡è¯†ç¬¦    | é€‚ç”¨åœºæ™¯                   | æ ¸å¿ƒä»·å€¼                                   |
| :----------- | :-------- | :------------------------- | :----------------------------------------- |
| **æŒä»“åž‹**   | `holding` | ç”¨æˆ·å½“å‰å·²æŒæœ‰è¯¥è‚¡ç¥¨       | å…³æ³¨æ­¢æŸä½ã€åŠ ä»“ç‚¹ï¼Œé˜²æ­¢åˆ©æ¶¦å›žåæˆ–äºæŸæ‰©ã€‚ |
| **æœªå»ºä»“åž‹** | `empty`   | ç”¨æˆ·æ­£åœ¨è§‚æœ›ï¼Œå¯»æ±‚å…¥åœºæœºä¼š | å…³æ³¨å…¥åœºè§¦å‘æ¡ä»¶ï¼Œè¯†åˆ«â€œå‡çªç ´â€æˆ–å¼±åŠ¿è¡Œæƒ…ã€‚ |
| **é€šç”¨åž‹**   | `general` | é€‚ç”¨äºŽæ‰€æœ‰å…³æ³¨è¯¥æ ‡çš„çš„ç”¨æˆ· | å…³æ³¨è¡Œä¸šæ¿å—åŠ¨æ€ã€é‡å¤§å…¬å‘Šå½±å“æˆ–å¤§ç›˜å…±æŒ¯ã€‚ |

---

## ðŸ“ LLM æç¤ºè¯ (Prompt) è§„èŒƒ

### System Prompt (ç³»ç»Ÿæç¤ºè¯)

```markdown
ä½ æ˜¯ StockWise çš„ AI å†³ç­–åŠ©æ‰‹ï¼Œä¸“é—¨ä¸ºä¸ªäººæŠ•èµ„è€…æä¾›è‚¡ç¥¨æ“ä½œå»ºè®®ã€‚

## ä½ çš„æ ¸å¿ƒåŽŸåˆ™ï¼š
1. **ç†æ€§é”šç‚¹**ï¼šä½ ä¸é¢„æµ‹æ¶¨è·Œï¼Œä½ æä¾›"æ‰§è¡Œçºªå¾‹"çš„è§¦å‘æ¡ä»¶ã€‚
2. **ä¸ªæ€§åŒ–**ï¼šæ ¹æ®ç”¨æˆ·æ˜¯"å·²æŒä»“"è¿˜æ˜¯"æœªå»ºä»“"ï¼Œæä¾›å·®å¼‚åŒ–çš„è¡ŒåŠ¨å»ºè®®ã€‚
3. **å¯éªŒè¯**ï¼šæ¯æ¡å»ºè®®éƒ½æœ‰æ˜Žç¡®çš„è§¦å‘æ¡ä»¶ï¼Œäº‹åŽå¯éªŒè¯å¯¹é”™ã€‚
4. **ç®€æ´ç›´ç™½**ï¼šä½¿ç”¨æ™®é€šäººèƒ½ç§’æ‡‚çš„è¯­è¨€ï¼Œé¿å…æ™¦æ¶©æœ¯è¯­ã€‚

## ä½ çš„è¾“å‡ºæ ¼å¼ï¼š
ä½ å¿…é¡»ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹ JSON æ ¼å¼è¾“å‡ºï¼Œä¸è¦æ·»åŠ ä»»ä½•å…¶ä»–æ–‡å­—ï¼š

{
  "signal": "Long" | "Side" | "Short",
  "confidence": 0.0 ~ 1.0,
  "summary": "ä¸€å¥è¯æ ¸å¿ƒç»“è®ºï¼ˆ15å­—ä»¥å†…ï¼‰",
  "analysis": {
    "trend": "è¶‹åŠ¿åˆ¤æ–­ç®€è¿°",
    "momentum": "åŠ¨èƒ½åˆ¤æ–­ç®€è¿°",
    "volume": "é‡èƒ½åˆ¤æ–­ç®€è¿°"
  },
  "tactics": {
    "holding": [...],   // æ¯é¡¹åŒ…å« priority, action, trigger, reason
    "empty": [...],
    "general": [...]
  },
  "key_levels": {
    "support": æ•°å€¼,
    "resistance": æ•°å€¼,
    "stop_loss": æ•°å€¼
  },
  "conflict_resolution": "å½“æŒ‡æ ‡å†²çªæ—¶çš„å†³ç­–åŽŸåˆ™",
  "tomorrow_focus": "æ˜Žæ—¥éœ€é‡ç‚¹å…³æ³¨çš„äº‹é¡¹"
}
```

---

## ðŸ“Š JSON æ•°æ®ç»“æž„å®šä¹‰

```typescript
/**
 * AI å†³ç­–æ ¸å¿ƒæ•°æ®åŒ… (å­˜å‚¨äºŽ ai_predictions.ai_reasoning)
 */
export interface TacticalData {
    // æ ¸å¿ƒç»“è®º
    summary: string; 
    
    // æ·±åº¦åˆ†æžç®€æŠ¥
    analysis: {
        trend: string;    // è¶‹åŠ¿ç»´åº¦
        momentum: string; // åŠ¨èƒ½ç»´åº¦
        volume: string;   // é‡èƒ½ç»´åº¦
    };

    // ç»“æž„åŒ–å»ºè®®
    tactics: {
        holding: Tactic[]; // æŒä»“æˆ˜æœ¯
        empty: Tactic[];   // æœªå»ºä»“æˆ˜æœ¯
        general: Tactic[]; // é€šç”¨æˆ˜æœ¯ï¼ˆæ¿å—/å…¬å‘Šç­‰ï¼‰
    };

    // å…³é”®ä½ï¼ˆç”¨äºŽ UI åŽæœŸæ‰©å±•æ˜¾ç¤ºï¼‰
    key_levels: {
        support: number;
        resistance: number;
        stop_loss: number;
    };

    // å†³ç­–é€»è¾‘
    conflict_resolution: string; // å†²çªå¤„ç†åŽŸåˆ™
    tomorrow_focus: string;      // åˆ’é‡ç‚¹
}

export interface Tactic {
    priority: "P1" | "P2" | "P3";
    action: string;  // åŠ¨ä½œæè¿°ï¼ˆå¦‚ï¼šæ­¢æŸ/å‡ä»“ï¼‰
    trigger: string; // è§¦å‘æ¡ä»¶ï¼ˆå¦‚ï¼šè·Œç ´ 15.80 ä¸”30åˆ†é’Ÿä¸æ”¶å›žï¼‰
    reason: string;  // ç†ç”±ï¼ˆå¦‚ï¼šé˜²æ­¢è¶‹åŠ¿è½¬ç›ˆä¸ºäºï¼‰
}
```

---

## ðŸ”„ çŠ¶æ€æ˜ å°„è¯´æ˜Ž

- **Signal -> UI é¢œè‰²**: 
  - `Long`: ðŸŸ¢ ç»¿è‰² / å»ºè®®åšå¤š
  - `Side`: ðŸŸ¡ é»„è‰² / å»ºè®®è§‚æœ›
  - `Short`: ðŸ”´ çº¢è‰² / å»ºè®®é¿é™©
- **User Position -> Tactics é€‰æ‹©**:
  - `data.rule.position === 'holding'` -> æ˜¾ç¤º `tactics.holding`
  - å…¶ä»–æƒ…å†µ -> æ˜¾ç¤º `tactics.empty`
  - `tactics.general` å§‹ç»ˆä½œä¸ºé™„å±žè¡¥å……æ˜¾ç¤ºã€‚
