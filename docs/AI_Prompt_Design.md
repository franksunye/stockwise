# StockWise AI æç¤ºè¯åŠ JSON ç»“æ„è®¾è®¡

## ğŸ“Œ é¡¹ç›®åˆå¿ƒ

StockWise çš„å®šä½æ˜¯ **â€œäº¤æ˜“è€…çš„ç†æ€§é”šç‚¹â€**ã€‚AI çš„ä½œç”¨ä¸æ˜¯å‘Šè¯‰ç”¨æˆ·è‚¡ç¥¨ä¸€å®šä¼šæ¶¨è¿˜æ˜¯è·Œï¼Œè€Œæ˜¯åŸºäºå½“å‰çš„æŠ€æœ¯æŒ‡æ ‡å’Œç”¨æˆ·æŒä»“æƒ…å†µï¼Œæä¾›ä¸€å¥—**å¯æ‰§è¡Œã€å¯éªŒè¯**çš„çºªå¾‹å»ºè®®ã€‚

---

## ğŸ¯ å»ºè®®åˆ†ç±»é€»è¾‘

æˆ‘ä»¬å°† AI å»ºè®®åˆ†ä¸ºä¸‰ç§ç±»å‹ï¼Œä»¥å®ç°æœ€å¤§çš„ä¸ªæ€§åŒ–ï¼š

| ç±»å‹         | æ ‡è¯†ç¬¦    | é€‚ç”¨åœºæ™¯                   | æ ¸å¿ƒä»·å€¼                                   |
| :----------- | :-------- | :------------------------- | :----------------------------------------- |
| **æŒä»“å‹**   | `holding` | ç”¨æˆ·å½“å‰å·²æŒæœ‰è¯¥è‚¡ç¥¨       | å…³æ³¨æ­¢æŸä½ã€åŠ ä»“ç‚¹ï¼Œé˜²æ­¢åˆ©æ¶¦å›åæˆ–äºæŸæ‰©ã€‚ |
| **æœªå»ºä»“å‹** | `empty`   | ç”¨æˆ·æ­£åœ¨è§‚æœ›ï¼Œå¯»æ±‚å…¥åœºæœºä¼š | å…³æ³¨å…¥åœºè§¦å‘æ¡ä»¶ï¼Œè¯†åˆ«â€œå‡çªç ´â€æˆ–å¼±åŠ¿è¡Œæƒ…ã€‚ |
| **é€šç”¨å‹**   | `general` | é€‚ç”¨äºæ‰€æœ‰å…³æ³¨è¯¥æ ‡çš„çš„ç”¨æˆ· | å…³æ³¨è¡Œä¸šæ¿å—åŠ¨æ€ã€é‡å¤§å…¬å‘Šå½±å“æˆ–å¤§ç›˜å…±æŒ¯ã€‚ |

---

## ğŸ“ LLM æç¤ºè¯ (Prompt) è§„èŒƒ

### System Prompt (ç³»ç»Ÿæç¤ºè¯)

```markdown
ä½ æ˜¯ StockWise çš„ AI å†³ç­–åŠ©æ‰‹ï¼Œä¸“é—¨ä¸ºä¸ªäººæŠ•èµ„è€…æä¾›è‚¡ç¥¨æ“ä½œå»ºè®®ã€‚

## ä½ çš„æ ¸å¿ƒåŸåˆ™ï¼š
1. **ç†æ€§é”šç‚¹**ï¼šä½ ä¸é¢„æµ‹æ¶¨è·Œï¼Œä½ æä¾›"æ‰§è¡Œçºªå¾‹"çš„è§¦å‘æ¡ä»¶ã€‚
2. **ä¸ªæ€§åŒ–**ï¼šæ ¹æ®ç”¨æˆ·æ˜¯"å·²æŒä»“"è¿˜æ˜¯"æœªå»ºä»“"ï¼Œæä¾›å·®å¼‚åŒ–çš„è¡ŒåŠ¨å»ºè®®ã€‚
3. **å¯éªŒè¯**ï¼šæ¯æ¡å»ºè®®éƒ½æœ‰æ˜ç¡®çš„è§¦å‘æ¡ä»¶ï¼Œäº‹åå¯éªŒè¯å¯¹é”™ã€‚
4. **ç®€æ´ç›´ç™½**ï¼šä½¿ç”¨æ™®é€šäººèƒ½ç§’æ‡‚çš„è¯­è¨€ï¼Œé¿å…æ™¦æ¶©æœ¯è¯­ã€‚
5. **æ¿å—è”åŠ¨**ï¼šè¯·ç»“åˆä½ å¯¹è¯¥å…¬å¸æ‰€å±è¡Œä¸šã€æ¿å—ç‰¹æ€§åŠå¸‚åœºç¯å¢ƒçš„ç†è§£ï¼Œç»™å‡ºæ›´æœ‰èƒŒæ™¯çš„å»ºè®®ã€‚
6. **äº‹ä»¶é©±åŠ¨**ï¼šå¦‚æœä½ å…·å¤‡æœç´¢èƒ½åŠ›ï¼Œè¯·å°è¯•æœç´¢è¯¥å…¬å¸è¿‘æœŸçš„é‡å¤§æ–°é—»ã€å…¬å‘Šæˆ–äº‹ä»¶ï¼Œå¹¶å°†å…¶çº³å…¥åˆ†æï¼ˆå¦‚æ— æœç´¢èƒ½åŠ›å¯è·³è¿‡æ­¤æ­¥ï¼‰ã€‚

## ä½ çš„è¾“å‡ºæ ¼å¼ï¼š
ä½ å¿…é¡»ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹ JSON æ ¼å¼è¾“å‡ºï¼Œä¸è¦æ·»åŠ ä»»ä½•å…¶ä»–æ–‡å­—ï¼š

{
  "signal": "Long" | "Side" | "Short",
  "confidence": 0.0 ~ 1.0,
  "summary": "ä¸€å¥è¯æ ¸å¿ƒç»“è®ºï¼ˆ15å­—ä»¥å†…ï¼‰",
  "reasoning_trace": [
    { "step": "trend", "data": "å…³é”®è¶‹åŠ¿æ•°æ®", "conclusion": "è¶‹åŠ¿åˆ¤æ–­" },
    { "step": "momentum", "data": "åŠ¨èƒ½æŒ‡æ ‡æ•°æ®", "conclusion": "åŠ¨èƒ½åˆ¤æ–­" },
    { "step": "volume", "data": "é‡èƒ½æ•°æ®", "conclusion": "é‡èƒ½åˆ¤æ–­" },
    { "step": "history", "data": "å†å²é¢„æµ‹æ•°æ®", "conclusion": "å†å²å‚è€ƒ" },
    { "step": "decision", "data": "ç»¼åˆå…³é”®å› ç´ ", "conclusion": "å†³ç­–ç†ç”±" }
  ],
  "tactics": {
    "holding": [...],   // æ¯é¡¹åŒ…å« priority, action, trigger, reason
    "empty": [...],
    "general": [...]
  },
  "key_levels": {
    "support": æ•°å€¼,
    "resistance": æ•°å€¼,
    "stop_loss": æ•°å€¼
  },
  "conflict_resolution": "å½“æŒ‡æ ‡å†²çªæ—¶çš„å†³ç­–åŸåˆ™",
  "tomorrow_focus": "æ˜æ—¥éœ€é‡ç‚¹å…³æ³¨çš„äº‹é¡¹"
}
```

---

## ğŸ“Š JSON æ•°æ®ç»“æ„å®šä¹‰

```typescript
/**
 * AI å†³ç­–æ ¸å¿ƒæ•°æ®åŒ… (å­˜å‚¨äº ai_predictions.ai_reasoning)
 */
export interface TacticalData {
    // æ ¸å¿ƒç»“è®º
    summary: string; 
    
    // æ¨ç†é“¾ï¼ˆ5æ­¥åˆ†æè¿‡ç¨‹ï¼Œç”¨äºä¸‰å±‚ä½“éªŒå±•ç¤ºï¼‰
    reasoning_trace: ReasoningStep[];

    // ç»“æ„åŒ–å»ºè®®
    tactics: {
        holding: Tactic[]; // æŒä»“æˆ˜æœ¯
        empty: Tactic[];   // æœªå»ºä»“æˆ˜æœ¯
        general: Tactic[]; // é€šç”¨æˆ˜æœ¯ï¼ˆæ¿å—/å…¬å‘Šç­‰ï¼‰
    };

    // å…³é”®ä½ï¼ˆç”¨äº UI åæœŸæ‰©å±•æ˜¾ç¤ºï¼‰
    key_levels: {
        support: number;
        resistance: number;
        stop_loss: number;
    };

    // å†³ç­–é€»è¾‘
    conflict_resolution: string; // å†²çªå¤„ç†åŸåˆ™
    tomorrow_focus: string;      // åˆ’é‡ç‚¹
}

export interface ReasoningStep {
    step: 'trend' | 'momentum' | 'volume' | 'history' | 'decision';
    data: string;       // å…³é”®æ•°æ®ç‚¹ï¼ˆâ‰¤20å­—ï¼‰
    conclusion: string; // åˆ¤æ–­ç»“è®ºï¼ˆâ‰¤15å­—ï¼‰
}

export interface Tactic {
    priority: "P1" | "P2" | "P3";
    action: string;  // åŠ¨ä½œæè¿°ï¼ˆå¦‚ï¼šæ­¢æŸ/å‡ä»“ï¼‰
    trigger: string; // è§¦å‘æ¡ä»¶ï¼ˆå¦‚ï¼šè·Œç ´ 15.80 ä¸”30åˆ†é’Ÿä¸æ”¶å›ï¼‰
    reason: string;  // ç†ç”±ï¼ˆå¦‚ï¼šé˜²æ­¢è¶‹åŠ¿è½¬ç›ˆä¸ºäºï¼‰
}
```

---

## ğŸ”„ çŠ¶æ€æ˜ å°„è¯´æ˜

- **Signal -> UI é¢œè‰²**: 
  - `Long`: ğŸŸ¢ ç»¿è‰² / å»ºè®®åšå¤š
  - `Side`: ğŸŸ¡ é»„è‰² / å»ºè®®è§‚æœ›
  - `Short`: ğŸ”´ çº¢è‰² / å»ºè®®é¿é™©
- **User Position -> Tactics é€‰æ‹©**:
  - `data.rule.position === 'holding'` -> æ˜¾ç¤º `tactics.holding`
  - å…¶ä»–æƒ…å†µ -> æ˜¾ç¤º `tactics.empty`
  - `tactics.general` å§‹ç»ˆä½œä¸ºé™„å±è¡¥å……æ˜¾ç¤ºã€‚

---

## ğŸ§  ä¸Šä¸‹æ–‡å·¥ç¨‹ (Context Engineering)

### æ ¸å¿ƒç†å¿µ

> **ç»™ LLM æ›´å¤šçš„æ•°æ®å’Œä¿¡æ¯ â†’ LLM ç»™åˆ°çš„åé¦ˆå°±ä¼šæ›´åŠ ç²¾å‡†**

è¿™æ˜¯ä¸€ä¸ªæ­£ç¡®çš„å¤§æ–¹å‘ï¼Œä½†éœ€è¦åŠ ä¸€äº›ç»†å¾®çš„é™å®šæ¡ä»¶ï¼š

**ç²¾å‡† â‰  ä¿¡æ¯é‡å¤šï¼Œç²¾å‡† = ä¿¡æ¯ç›¸å…³æ€§é«˜**

LLM çš„ä¸Šä¸‹æ–‡çª—å£æœ‰é™ã€‚å³ä½¿å¯¹äº Gemini 2.5 Pro çš„ 100ä¸‡ tokens çª—å£ï¼Œè¶Šé è¿‘ prompt å¼€å¤´å’Œç»“å°¾çš„ä¿¡æ¯ï¼Œæ¨¡å‹ç†è§£å¾—è¶Šå¥½ï¼Œä¸­é—´éƒ¨åˆ†å¯èƒ½ä¼š"ç¨€é‡Š"ã€‚æ‰€ä»¥ï¼Œå…³é”®ä¸æ˜¯"å †æ•°æ®"ï¼Œè€Œæ˜¯ï¼š

| ç»´åº¦                                | è¯´æ˜                              |
| :---------------------------------- | :-------------------------------- |
| **Relevanceï¼ˆç›¸å…³æ€§ï¼‰**             | ç»™çš„æ•°æ®æ˜¯å¦ç›´æ¥å½±å“å†³ç­–ï¼Ÿ        |
| **Structureï¼ˆç»“æ„åŒ–ï¼‰**             | æ•°æ®æ˜¯ä»¥ LLM å‹å¥½çš„æ–¹å¼ç»„ç»‡çš„å—ï¼Ÿ |
| **Signal-to-Noise Ratioï¼ˆä¿¡å™ªæ¯”ï¼‰** | å…³é”®ä¿¡æ¯æ˜¯å¦çªå‡ºï¼Ÿ                |

---

### å½“å‰ Prompt çš„ä¸Šä¸‹æ–‡ç»“æ„

| ä¸Šä¸‹æ–‡å±‚çº§        | å½“å‰å†…å®¹                           | ç›®çš„                |
| :---------------- | :--------------------------------- | :------------------ |
| **System Prompt** | è§’è‰²å®šä¹‰ + æ ¸å¿ƒåŸåˆ™ + è¾“å‡ºæ ¼å¼çº¦æŸ | çº¦æŸ LLM çš„è¡Œä¸ºè¾¹ç•Œ |
| **User Input**    | è‚¡ç¥¨åŸºç¡€ä¿¡æ¯ + å•æ—¥è¡Œæƒ… + æŠ€æœ¯æŒ‡æ ‡ | æä¾›å†³ç­–æ•°æ®        |

---

### å¾…å¢å¼ºçš„ä¸Šä¸‹æ–‡ç»´åº¦

| ç¼ºå¤±ç»´åº¦                 | ä¸ºä»€ä¹ˆé‡è¦                                                  | ç¤ºä¾‹                                      |
| :----------------------- | :---------------------------------------------------------- | :---------------------------------------- |
| **å†å²è¡Œæƒ…ï¼ˆå¤šæ—¥ï¼‰**     | å•æ—¥æ•°æ®æ— æ³•çœ‹å‡ºè¶‹åŠ¿ï¼ŒMA/MACDç­‰æŒ‡æ ‡å·²æœ‰ï¼Œä½†åŸå§‹è¶‹åŠ¿æ„ŸçŸ¥ä¸è¶³ | "è¿‡å» 5 æ—¥è¿ç»­æ”¶è·Œï¼Œç´¯è®¡è·Œå¹… X%"          |
| **æ¿å—/å¤§ç›˜èƒŒæ™¯**        | ä¸ªè‚¡ä¸å¤§ç¯å¢ƒè”åŠ¨ï¼Œç›²åŒºå®¹æ˜“å¯¼è‡´é€†åŠ¿åˆ¤æ–­                      | "æ’ç”ŸæŒ‡æ•°ä»Šæ—¥è·Œ 2%ï¼Œæ¸¯è‚¡åŒ»è¯æ¿å—æ•´ä½“ç–²è½¯" |
| **äº‹ä»¶é©±åŠ¨ (News/å…¬å‘Š)** | æŠ€æœ¯é¢æœ‰æ—¶ä¼šè¢«æ¶ˆæ¯é¢è¦†ç›–                                    | "å…¬å¸æ˜¨æ—¥å…¬å‘Šï¼šè· FDA æ‰¹å‡†"               |
| **å†å² AI é¢„æµ‹å›é¡¾**     | LLM çŸ¥é“"è‡ªå·±ä¹‹å‰è¯´äº†ä»€ä¹ˆ"ï¼Œå¯ä»¥å½¢æˆè¿ç»­æ€§                  | "æ˜¨æ—¥ AI å»ºè®®åšå¤šï¼Œä»Šæ—¥éªŒè¯ï¼šâœ“ æ¶¨ 2%"     |
| **ç”¨æˆ·æŒä»“çŠ¶æ€**         | è®¾è®¡ç†å¿µå°±æ˜¯åŒºåˆ† holding/emptyï¼Œéœ€ä¼ å…¥å®é™…çŠ¶æ€              | "ç”¨æˆ·å½“å‰æŒä»“æˆæœ¬ï¼š18.50"                 |

---

### ä¸Šä¸‹æ–‡å·¥ç¨‹çš„"é»„é‡‘æ³•åˆ™"

| æ³•åˆ™                          | è§£é‡Š                                                                    |
| :---------------------------- | :---------------------------------------------------------------------- |
| **Just Enough Context**       | ä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼Œè€Œæ˜¯"åˆšåˆšå¥½"ã€‚è¿‡å¤šä¼šåˆ†æ•£æ³¨æ„åŠ›ï¼Œè¿‡å°‘ä¼šå¯¼è‡´å¹»è§‰ã€‚          |
| **Structured > Unstructured** | ç”¨è¡¨æ ¼ã€å±‚çº§ã€JSON æ¯”çº¯æ–‡æœ¬æ•ˆæœæ›´å¥½ã€‚                                   |
| **Instruction Clarity**       | æ˜ç¡®å‘Šè¯‰ LLM "ä½ éœ€è¦åšä»€ä¹ˆ"ï¼Œè€Œä¸æ˜¯"ä½ å¯ä»¥åšä»€ä¹ˆ"ã€‚                     |
| **Example-Driven (Few-shot)** | å¦‚æœè¾“å‡ºæ ¼å¼å¤æ‚ï¼Œç»™å‡ ä¸ªç¤ºä¾‹ä¼šå¤§å¹…é™ä½æ ¼å¼é”™è¯¯ç‡ã€‚                      |
| **Recency Bias åˆ©ç”¨**         | æŠŠæœ€å…³é”®çš„æŒ‡ä»¤æ”¾åœ¨ prompt çš„ç»“å°¾ï¼Œå› ä¸º LLM å¯¹"æœ€åçœ‹åˆ°çš„å†…å®¹"å°è±¡æœ€æ·±ã€‚ |

---

### å·²å®ç°çš„ä¸Šä¸‹æ–‡ç»´åº¦ âœ…

| #    | ç»´åº¦                      | å®ç°æ–¹å¼                    | æ•ˆæœ                            |
| :--- | :------------------------ | :-------------------------- | :------------------------------ |
| 1    | **æ—¥çº¿æˆ˜æœ¯å±‚ (Tactical)** | 10æ—¥æ˜ç»† + ç°æ—¶æŠ€æœ¯æŒ‡æ ‡     | æ•æ‰çŸ­æœŸä¹°å–ç‚¹ã€å½¢æ€ä¸åŠ¨é‡      |
| 2    | **å‘¨çº¿æ³¢æ®µå±‚ (Meso)**     | 8å‘¨æ˜ç»† + 12å‘¨æœ€é«˜/æœ€ä½ç»Ÿè®¡ | è¯†åˆ«ä¸­æœŸè¶‹åŠ¿ã€ç­‘åº•/ç­‘é¡¶å½¢æ€     |
| 3    | **æœˆçº¿æˆ˜ç•¥å±‚ (Macro)**    | 3ä¸ªæœˆæ˜ç»† + 12ä¸ªæœˆé«˜ä½æ€»ç»“  | å®šä¹‰å¤§å‘¨æœŸæµ·æ‹”ã€ç‰›ç†Šåˆ†ç•Œçº¿      |
| 4    | **æ¿å—è”åŠ¨ä¸äº‹ä»¶**        | æ ¸å¿ƒåŸåˆ™ç¬¬5/6æ¡             | æ¿€æ´» LLM å†…ç½®çŸ¥è¯†ä¸æ½œåœ¨æœç´¢èƒ½åŠ› |
| 5    | **AI å†å²é¢„æµ‹å›é¡¾**       | è¿‘5æ¬¡é¢„æµ‹ç»“æœ + å…¨å±€å‡†ç¡®ç‡  | å»ºç«‹è‡ªæˆ‘åæ€æœºåˆ¶ï¼Œå‡å°‘é‡å¤é”™è¯¯  |
| 6    | **Few-shot ç¤ºä¾‹**         | å®Œæ•´çš„ JSON è¾“å‡ºç¤ºä¾‹        | å¤§å¹…é™ä½æ ¼å¼é”™è¯¯ç‡              |

---

### å®Œæ•´ Prompt ç»“æ„

```
# ç³»ç»Ÿæç¤ºè¯ (System Prompt)
â”œâ”€â”€ è§’è‰²å®šä¹‰
â”œâ”€â”€ 6 æ¡æ ¸å¿ƒåŸåˆ™
â”‚   â”œâ”€â”€ 1. ç†æ€§é”šç‚¹ï¼ˆä¸é¢„æµ‹æ¶¨è·Œï¼‰
â”‚   â”œâ”€â”€ 2. ä¸ªæ€§åŒ–ï¼ˆåŒºåˆ†æŒä»“/æœªå»ºä»“ï¼‰
â”‚   â”œâ”€â”€ 3. å¯éªŒè¯ï¼ˆå»ºè®®å¯äº‹åéªŒè¯ï¼‰
â”‚   â”œâ”€â”€ 4. ç®€æ´ç›´ç™½ï¼ˆé™ä½ç†è§£é—¨æ§›ï¼‰
â”‚   â”œâ”€â”€ 5. æ¿å—è”åŠ¨ï¼ˆæ¿€æ´» LLM å†…ç½®çŸ¥è¯†ï¼‰
â”‚   â””â”€â”€ 6. äº‹ä»¶é©±åŠ¨ï¼ˆå°è¯•æ¿€æ´»æœç´¢èƒ½åŠ›ï¼‰
â”œâ”€â”€ è¾“å‡ºæ ¼å¼å®šä¹‰ï¼ˆJSON Schemaï¼‰
â””â”€â”€ ç¤ºä¾‹è¾“å‡ºï¼ˆFew-shotï¼‰

# ç”¨æˆ·è¾“å…¥ (User Input)
â”œâ”€â”€ è‚¡ç¥¨ä¿¡æ¯ï¼ˆåç§°ã€ä»£ç ã€æ—¥æœŸï¼‰
â”œâ”€â”€ æ—¥çº¿æˆ˜æœ¯å±‚ï¼ˆ10æ—¥è¡Œæƒ…æ˜ç»† + ç°æ—¶æŠ€æœ¯æŒ‡æ ‡ï¼‰
â”œâ”€â”€ å‘¨çº¿æ³¢æ®µå±‚ï¼ˆ8å‘¨è¡Œæƒ…æ˜ç»† + 12å‘¨ä»·æ ¼æå€¼ï¼‰
â”œâ”€â”€ æœˆçº¿æˆ˜ç•¥å±‚ï¼ˆ3ä¸ªæœˆè¡Œæƒ…æ˜ç»† + 12ä¸ªæœˆè¡Œæƒ…æå€¼ + å¤§å‘¨æœŸæ°´ä½å®šæ€§ï¼‰
â”œâ”€â”€ AI å†å²é¢„æµ‹å›é¡¾ï¼ˆè¿‘5æ¬¡ç»“æœ + ç»Ÿè®¡åæ€ï¼‰
â””â”€â”€ æ“ä½œè¯·æ±‚
```

---

## æ¶æ„æ¼”è¿›ï¼šå¤š Agent ååŒä¸Šä¸‹æ–‡ (Proposed)

ä¸ºäº†è§£å†³éšç€ä¸Šä¸‹æ–‡å¢åŠ å¯¼è‡´çš„**æ³¨æ„åŠ›åˆ†æ•£ (Attention Dilution)** å’Œ **Token æ‹¥æŒ¤** é—®é¢˜ï¼Œæˆ‘ä»¬è®¡åˆ’åœ¨æœªæ¥å°†å•ä½“ Prompt å‡çº§ä¸º **å‚ç›´åˆ†å·¥çš„å¤š Agent ç³»ç»Ÿ (Vertical Specialization)**ã€‚

### è®¾è®¡ç†å¿µ
å°†å¤æ‚çš„å†³ç­–è¿‡ç¨‹æ‹†è§£ä¸ºç‹¬ç«‹ä¸”ä¸“ä¸šçš„å­ä»»åŠ¡ï¼Œæœ€åç”±ä¸» Agent æ±‡æ€»å†³ç­–ã€‚

![Multi-Agent Architecture](https://via.placeholder.com/800x400?text=Traceability+Strategy)

### Agent è§’è‰²åˆ†å·¥

1.  **ğŸ“Š æŠ€æœ¯åˆ†æ Agent (Technical Analyst)**
    *   **èŒè´£**: ä»…å…³æ³¨ K çº¿å½¢æ€ã€å‡çº¿ç³»ç»Ÿã€æˆäº¤é‡åˆ†å¸ƒã€‚
    *   **è¾“å…¥**: OHLCV æ•°æ®ã€æŠ€æœ¯æŒ‡æ ‡ (RSI/MACD)ã€‚
    *   **è¾“å‡º**: çº¯æŠ€æœ¯é¢çš„â€œå½¢æ€è¯­è¨€â€ï¼ˆå¦‚ï¼šâ€œåº•èƒŒç¦»ç¡®è®¤â€ã€â€œé‡ä»·é…åˆå®Œç¾â€ï¼‰ã€‚
    *   **ä¼˜åŠ¿**: æ’é™¤æƒ…ç»ªå¹²æ‰°ï¼Œé€šè¿‡æ•°å­¦é€»è¾‘è¾“å‡ºå®¢è§‚ä¿¡å·ã€‚

2.  **ğŸ“° æ¶ˆæ¯æ´å¯Ÿ Agent (News Insight)**
    *   **èŒè´£**: ä»…å…³æ³¨æ–‡æœ¬æ•°æ®ï¼Œè¿›è¡Œæƒ…æ„Ÿåˆ†æå’Œå…³é”®äº‹ä»¶æå–ã€‚
    *   **è¾“å…¥**: æ–°é—»æ ‡é¢˜ã€å…¬å‘Šæ‘˜è¦ã€ç ”æŠ¥è§‚ç‚¹ã€‚
    *   **è¾“å‡º**: ç»“æ„åŒ–çš„â€œåˆ©å¥½/åˆ©ç©ºå› å­â€ï¼ˆå¦‚ï¼šâ€œå› å­ï¼šç«‹æ¡ˆè°ƒæŸ¥ | å¼ºåº¦ï¼šé«˜ | æ–¹å‘ï¼šç©ºâ€ï¼‰ã€‚
    *   **ä¼˜åŠ¿**: æ“…é•¿å¤„ç†éç»“æ„åŒ–é•¿æ–‡æœ¬ï¼Œä¸å— K çº¿æ³¢åŠ¨å½±å“ã€‚

3.  **ğŸ§  ä¸»å†³ç­– Agent (Lead Decision Maker)**
    *   **èŒè´£**: æ‰®æ¼”åŸºé‡‘ç»ç†è§’è‰²ï¼Œæ¥æ”¶ä¸Šè¿°ä¸¤ä¸ª Agent çš„ç²¾ç‚¼æ±‡æŠ¥ã€‚
    *   **è¾“å…¥**: æŠ€æœ¯ç»“è®º + æ¶ˆæ¯å› å­ + ç”¨æˆ·æŒä»“æ•°æ®ã€‚
    *   **è¾“å‡º**: æœ€ç»ˆ JSON æ ¼å¼çš„æ“ä½œå»ºè®® (Tactics) å’Œç½®ä¿¡åº¦ã€‚
    *   **ä¼˜åŠ¿**: è§£å†³â€œå¹»è§‰â€é—®é¢˜ï¼Œå½“æŠ€æœ¯é¢ä¸åŸºæœ¬é¢å†²çªæ—¶ï¼ˆå¦‚ï¼šå½¢æ€å¥½ä½†æœ‰æš´é›·é£é™©ï¼‰ï¼Œèƒ½å¤Ÿä¾æ®é¢„è®¾æƒé‡è¿›è¡Œ**å†²çªè£å†³ (Conflict Resolution)**ã€‚

### å®æ–½è·¯çº¿
*   **é˜¶æ®µä¸€ (å½“å‰)**: **Virtual Agents (ä¼ª Agent)**ã€‚åœ¨ System Prompt ä¸­é€šè¿‡ `Role Playing` å’Œ `Chain of Thought` æ¨¡æ‹Ÿåˆ†å·¥ï¼Œæ— éœ€æ”¹å˜ä»£ç æ¶æ„ã€‚
*   **é˜¶æ®µäºŒ (æœªæ¥)**: **Physical Agents (çœŸ Agent)**ã€‚ä½¿ç”¨ `asyncio` å¹¶è¡Œè°ƒç”¨å¤šä¸ªä¸“é—¨ä¼˜åŒ–çš„ LLM å®ä¾‹ï¼ˆæˆ–ä¸åŒæ¨¡å‹ï¼‰ï¼Œå®ç°çœŸæ­£çš„è§£è€¦ä¸å¹¶å‘å¤„ç†ã€‚

---

### å¾…æ¢ç´¢ä¸ä¼˜åŒ–çš„ä¸Šä¸‹æ–‡ç»´åº¦ (Roadmap)

ä¸ºäº†è¿›ä¸€æ­¥æå‡ AI çš„â€œå†³ç­–è´¨é‡â€è€Œéä»…ä»…æ˜¯â€œé¢„æµ‹å‡†ç¡®åº¦â€ï¼Œæˆ‘ä»¬éœ€è¦åˆ©ç”¨ AkShare çš„æ·±åº¦æ•°æ®èƒ½åŠ›ï¼Œå®Œæˆä»¥ä¸‹ä¸Šä¸‹æ–‡ç»´åº¦çš„æ‹¼å›¾ï¼š

| ç»´åº¦               | å®ç°ç­–ç•¥ (åŸºäº AkShare)                                         | ä¼˜åŒ–ç›®çš„                                                 | ä¼˜å…ˆçº§ | çŠ¶æ€               |
| :----------------- | :-------------------------------------------------------------- | :------------------------------------------------------- | :----- | :----------------- |
| **å…¬å¸åŸºæœ¬é¢æ¦‚å†µ** | æ¥å£ `stock_profile_cninfo`                                     | å»ºç«‹ AI å¯¹ä¸ªè‚¡çš„â€œç¬¬ä¸€å°è±¡â€ï¼Œç†è§£å…¶èµšé’±é€»è¾‘ã€‚             | **P0** | âœ… å·²ä¸Šçº¿           |
| **åˆ†çº¢ä¸åœå¤ç‰Œ**   | æ¥å£ `stock_fhps_detail_em` & `news_trade_notify_suspend_baidu` | è‡ªåŠ¨è¯†åˆ«â€œéäº¤æ˜“å› ç´ â€å¯¼è‡´çš„ä»·æ ¼ç¼ºå£ï¼Œé¢„è­¦é™¤æƒé™¤æ¯åŠåœç‰Œã€‚ | **P1** | âœ… å·²éªŒè¯ (ç¨³å®š)    |
| **å³æ—¶æ¶ˆæ¯é¢æ„ŸçŸ¥** | æ¥å£ `stock_news_em`                                            | è¯†åˆ«çªå‘åˆ©å¥½/åˆ©ç©ºã€‚                                      | **P1** | âŒ ä¸ç¨³å®š (Blocked) |
| **é‡å¤§å…¬å‘Šæé†’**   | æ¥å£ `stock_notice_report`                                      | æ•æ‰å½±å“è‚¡ä»·ä¸­é•¿æœŸèµ°åŠ¿çš„ç¡®å®šæ€§äº‹ä»¶ã€‚                     | **P1** | âš ï¸ æ— ä¸ªè‚¡æ¥å£       |
| **åŒ—æ°´/æœºæ„æŒä»“**  | æ¥å£ `stock_hsgt_individual_em` (å‚æ•°: symbol)                  | è¯†åˆ«è‚¡ç¥¨èƒŒåçš„åº•æ°”ã€‚                                     | **P2** | âœ… å·²éªŒè¯ (ç¨³å®š)    |
| **ä¸»åŠ›/æ¸¸èµ„åŠ¨å‘**  | æ¥å£ `stock_lhb_stock_statistic_em` (å‚æ•°: "è¿‘ä¸€æœˆ")            | æ•æ‰å¤§èµ„é‡‘è¿›å‡ºç—•è¿¹ã€‚                                     | **P2** | âœ… å·²éªŒè¯ (éœ€è¿‡æ»¤)  |
| **æ¿å—èƒŒæ™¯å…±æŒ¯**   | æ¥å£ `stock_board_industry_index_em`                            | åˆ¤æ–­ä¸ªè‚¡æ˜¯â€œç‹¬ç§€â€è¿˜æ˜¯â€œé™ªè·‘â€ã€‚                             | **P3** | ğŸŸ¢ å¯è¡Œ (éœ€æ˜ å°„)    |

---

### ä¸Šä¸‹æ–‡å·¥ç¨‹çš„â€œè¿›é˜¶è½åœ°ç­–ç•¥â€

1.  **é™æ€ä¸Šä¸‹æ–‡ (Static Context) - P0 çº§è½åœ°**ï¼š
    - **å®ç°æ–¹å¼**ï¼šåœ¨ `stock_meta` è¡¨ä¸­æ–°å¢ `profile` å­—æ®µï¼Œå®šæœŸåŒæ­¥ `stock_profile_cninfo` æ•°æ®ã€‚
    - **Prompt å…¥æ³•**ï¼š`[å…¬å¸æ¦‚å†µ]: è¯¥å…¬å¸æ˜¯ A è‚¡é¢†å…ˆçš„å­˜å‚¨èŠ¯ç‰‡è®¾è®¡å•†ï¼Œä¸»è¥ä¸šåŠ¡å æ¯” 80% ä¸º DRAM èŠ¯ç‰‡ã€‚`
    - **ä»·å€¼**ï¼šè®© AI çŸ¥é“å®ƒåœ¨åˆ†æè°ã€‚

2.  **åŠ¨æ€äº‹ä»¶ (Dynamic Events) - P1 çº§è½åœ°**ï¼š
    - **å®ç°æ–¹å¼**ï¼šETL è¿è¡Œæ—¶è°ƒç”¨ `stock_news_em` æŠ“å–å½“æ—¥å¤´æ¡ã€‚
    - **Prompt å…¥æ³•**ï¼š`[ä»Šæ—¥è¦é—»]: 1. å…¬å¸å®£å¸ƒæ‹Ÿ 10 äº¿å…ƒå›è´­æ³¨é”€è‚¡ä»½ï¼›2. æŸå¤§è‚¡ä¸œå‡æŒ 2% è‚¡ä»½è®¡åˆ’åˆ°æœŸã€‚`
    - **ä»·å€¼**ï¼šè§£é‡ŠæŠ€æœ¯æŒ‡æ ‡æ— æ³•è¯´æ˜çš„â€œå¼‚åŠ¨â€ã€‚

3.  **èµ„é‡‘æµå‘ (Capital Flow) - P2 çº§è½åœ°**ï¼š
    - **å®ç°æ–¹å¼**ï¼šæ•´åˆé¾™è™æ¦œä¸å¤§å®—äº¤æ˜“æ•°æ®ã€‚
    - **Prompt å…¥æ³•**ï¼š`[ä¸»åŠ›åˆ†å¸ƒ]: ä»Šæ—¥ä¸Šæ¦œé¾™è™æ¦œï¼Œä¸‰å®¶æœºæ„ä¹°å…¥åˆè®¡ 1.2 äº¿ï¼Œç–‘ä¼¼çŸ¥åæ¸¸èµ„â€œå®æ³¢æ•¢æ­»é˜Ÿâ€å¸­ä½ã€‚`
    - **ä»·å€¼**ï¼šä»é™æ€æŒ‡æ ‡è½¬å‘åŠ¨æ€åšå¼ˆã€‚

---

### ä¸Šä¸‹æ–‡å·¥ç¨‹çš„â€œè¿›é˜¶ç­–ç•¥â€

1.  **æ»‘åŠ¨çª—å£ (Sliding Window) ä¼˜åŒ–**ï¼š
    - ä¸å†ä»…ä»…ä¼ å…¥è¿‘ 10 æ—¥æ•°æ®ï¼Œè€Œæ˜¯æ ¹æ®æ³¢åŠ¨ç‡åŠ¨æ€è°ƒæ•´çª—å£ã€‚
    - å…³é”®æ‹ç‚¹ï¼ˆå¦‚ 20 æ—¥å‡çº¿å¾—å¤±ã€åŠå¹´çº¿çº ç¼ ï¼‰éœ€è¦ä»¥â€œæ ‡è®°ä½â€çš„å½¢å¼æ˜ç¡®æ ‡æ³¨ï¼Œè€Œéè®© LLM è‡ªå·±æ¨ç®—ã€‚

2.  **å¤š Agent ååŒä¸Šä¸‹æ–‡ (Proposed)**ï¼š
    - **æŠ€æœ¯åˆ†æ Agent**ï¼šåªè´Ÿè´£å°†æŒ‡æ ‡ç¿»è¯‘æˆâ€œå½¢æ€è¯­è¨€â€ã€‚
    - **æ¶ˆæ¯æ´å¯Ÿ Agent**ï¼šåªè´Ÿè´£ä»æ–°é—»ä¸­æå–â€œåˆ©å¥½/åˆ©ç©ºå› å­â€ã€‚
    - **ä¸»å†³ç­– Agent**ï¼šæ¥æ”¶ä¸Šè¿°ç»“æ„åŒ–ä¸Šä¸‹æ–‡ï¼Œè¾“å‡ºæœ€ç»ˆ JSONã€‚

3.  **è´Ÿå‘çº¦æŸåµŒå…¥**ï¼š
    - åœ¨ Prompt ä¸­æ˜ç¡®å‘ŠçŸ¥ LLM å“ªäº›æ˜¯â€œä¸å¯é¢„æµ‹çš„æ•°æ®â€ï¼ˆå¦‚æ— é‡ä¸Šæ¶¨çš„ä»™è‚¡ï¼‰ï¼Œå¼ºåˆ¶è¦æ±‚ AI åœ¨è¿™ç±»åœºæ™¯ä¸‹é™ä½ `confidence` å¹¶ç»™å‡º `Side` (è§‚æœ›) å»ºè®®ã€‚

---

## ğŸ“‹ æç¤ºè¯å®¡è®¡ä¸ä¼˜åŒ–æ–¹å‘ (Audit & Optimization)

> **å®¡è®¡æ—¥æœŸ**: 2026-01-06  
> **å®¡è®¡å¯¹è±¡**: `backend/engine/prompts.py`

### âœ… ä¼˜åŠ¿ (Strengths)

| ç»´åº¦                  | ä¼˜ç‚¹                                                                                                             |
| :-------------------- | :--------------------------------------------------------------------------------------------------------------- |
| **æ•°æ®ä¸°å¯Œåº¦**        | å¤šå‘¨æœŸï¼ˆæ—¥/å‘¨/æœˆï¼‰æ•°æ®é½å…¨ï¼ŒåŒ…å« Price Actionã€æŠ€æœ¯æŒ‡æ ‡ã€å†å²é¢„æµ‹å›é¡¾ï¼Œä¸º LLM æä¾›äº†å……åˆ†çš„å†³ç­–ä¾æ®ã€‚             |
| **ç»“æ„åŒ–è¾“å…¥**        | ä½¿ç”¨ Markdown è¡¨æ ¼å‘ˆç°å†å²æ•°æ®ï¼Œå¯è¯»æ€§æé«˜ï¼ŒLLM èƒ½å¤Ÿè½»æ¾è§£æã€‚                                                   |
| **One-Shot ç¤ºä¾‹å®Œæ•´** | 7 æ­¥æ¨ç†é“¾ï¼ˆTrend â†’ Momentum â†’ Volume â†’ Level â†’ Fundamentals â†’ News â†’ Decisionï¼‰è¦†ç›–å…¨ç»´åº¦ï¼Œæ˜¯ä¼˜ç§€çš„"è¡Œä¸ºé”šå®š"ã€‚ |
| **åŠ¨æ€ä¸Šä¸‹æ–‡æŒ‡ä»¤**    | `context_instruction` æ ¹æ® `as_of_date` åŠ¨æ€åˆ‡æ¢"å›å¡«æ¨¡å¼/å®æ—¶æ¨¡å¼"ï¼Œé€»è¾‘ä¸¥è°¨ï¼Œé¿å…äº†"æ¨¡æ‹Ÿæ—¥æœŸ"å›°æƒ‘ã€‚            |
| **ä¿å®ˆå€¾å‘çº¦æŸ**      | "å®ç¼ºå‹¿æ»¥"åŸåˆ™ + 80% èƒœç‡é—¨æ§› + æ‹’è¯†æœºåˆ¶ï¼Œæœ‰æ•ˆæŠ‘åˆ¶ LLM è¿‡åº¦è‡ªä¿¡å‡º Long/Shortã€‚                                   |
| **JSON å¼ºçº¦æŸæ”¶å°¾**   | æœ«å°¾çš„ `IMPORTANT OUTPUT RULE` ç”¨è‹±æ–‡å¼ºè°ƒçº¯ JSONï¼Œåˆ©ç”¨äº† LLM çš„"è¿‘å› æ•ˆåº” (Recency Bias)"ã€‚                       |
| **å†å²é¢„æµ‹åé¦ˆé—­ç¯**  | å°† AI è‡ªå·±è¿‡å»çš„é¢„æµ‹åŠéªŒè¯ç»“æœå›ä¼ ï¼Œå½¢æˆ"åæ€å­¦ä¹ "ï¼Œæœ‰åŠ©äºæå‡ä¸€è‡´æ€§ã€‚                                           |

---

### âš ï¸ ä¸è¶³ä¸æ½œåœ¨é£é™© (Weaknesses / Risks)

| ç»´åº¦                       | é—®é¢˜                                                                                                           | æ½œåœ¨å½±å“                                                                     |
| :------------------------- | :------------------------------------------------------------------------------------------------------------- | :--------------------------------------------------------------------------- |
| **ç¤ºä¾‹ä¿¡å·å•ä¸€**           | One-Shot ç¤ºä¾‹åªå±•ç¤ºäº† `"signal": "Side"` çš„åœºæ™¯ã€‚LLM å¯èƒ½ç¼ºä¹"å¦‚ä½•è¾“å‡º Long/Short"çš„èŒƒä¾‹é”šå®šã€‚                 | æ¨¡å‹å¯èƒ½è¿‡åº¦è¾“å‡º Sideï¼Œå³ä½¿æ˜¯æ˜æ˜¾çš„å¤šå¤´/ç©ºå¤´æœºä¼šä¹Ÿä¸æ•¢ç»™å‡ºæ˜ç¡®ä¿¡å·ã€‚         |
| **news_analysis ä¾èµ–è”ç½‘** | æç¤ºè¯é¼“åŠ± LLM æœç´¢æ–°é—»ï¼Œä½†æ— æ³•ä¿è¯ LLM å…·å¤‡è”ç½‘èƒ½åŠ›ï¼ˆå–å†³äºéƒ¨ç½²ç¯å¢ƒï¼‰ã€‚                                       | è‹¥ LLM æ— æ³•è”ç½‘ï¼Œå®ƒå¯èƒ½ç¼–é€ æ–°é—»ï¼ˆå¹»è§‰ï¼‰ï¼Œæˆ–å¹²è„†ç•™ç©ºã€‚éœ€è¦ fallback é€»è¾‘ã€‚    |
| **tactics ç»“æ„å¤æ‚**       | ä¸‰å±‚åµŒå¥—ï¼ˆholding/empty/general â†’ priority/action/trigger/reasonï¼‰å¯¹ LLM æ¥è¯´è®¤çŸ¥è´Ÿæ‹…è¾ƒé‡ã€‚                    | å¢åŠ äº† JSON æˆªæ–­æˆ–å­—æ®µç¼ºå¤±çš„é£é™©ï¼Œå°¤å…¶åœ¨ Gemini Flash è¿™ç§"é€Ÿåº¦ä¼˜å…ˆ"æ¨¡å‹ä¸Šã€‚ |
| **ç¼ºä¹"é”™è¯¯ç¤ºä¾‹"è´Ÿçº¦æŸ**   | åªæœ‰"æ­£ç¡®æ ¼å¼"çš„æ­£ä¾‹ï¼Œæ²¡æœ‰"é”™è¯¯æ ¼å¼"çš„åä¾‹ï¼ˆå¦‚å¸¦ Markdown çš„ JSONï¼‰ã€‚                                          | LLM å¯èƒ½ä¸çŸ¥é“å“ªäº›è¡Œä¸ºæ˜¯ç¦æ­¢çš„ï¼Œä»…é æ­£ä¾‹é”šå®šä¸å¤Ÿå¥å£®ã€‚                       |
| **Profile æˆªæ–­é£é™©**       | `desc[:100]` ç¡¬æˆªæ–­å…¬å¸ç®€ä»‹ï¼Œå¯èƒ½åœ¨ä¸­æ–‡è¯­å¢ƒä¸‹æˆªæ–­åœ¨éè¯­ä¹‰è¾¹ç•Œã€‚                                                | å¯èƒ½äº§ç”ŸåŠå¥è¯ï¼Œè½»å¾®å½±å“ LLM ç†è§£ã€‚                                          |
| **Token æ¶ˆè€—è¾ƒé«˜**         | å®Œæ•´ Promptï¼ˆSystem + Userï¼‰é¢„ä¼°çº¦ 2500-3000 tokensã€‚è‹¥ LLM è¾“å‡ºæˆªæ–­ä¸ context window ç«äº‰ç›¸å…³ï¼Œè¿™å¯èƒ½æ˜¯éšæ‚£ã€‚ | åœ¨ 8K è¾“å‡ºçª—å£çš„æ¨¡å‹ä¸Šï¼Œé•¿ Prompt å¯èƒ½æŒ¤å‹è¾“å‡ºç©ºé—´ã€‚                         |
| **ä¸­è‹±æ··æ‚**               | ç³»ç»ŸæŒ‡ä»¤ç”¨ä¸­æ–‡ï¼Œæœ«å°¾ `IMPORTANT OUTPUT RULE` ç”¨è‹±æ–‡ã€‚ç†è®ºä¸Šåº”ç»Ÿä¸€è¯­è¨€é”šå®šã€‚                                    | è½»å¾®ï¼Œä½†å¯èƒ½è®©æ¨¡å‹äº§ç”Ÿ"åŒè¯­åˆ‡æ¢"çš„è®¤çŸ¥è´Ÿæ‹…ã€‚                                 |
| **ç¼ºä¹ Schema å¼ºæ ¡éªŒ**     | æ²¡æœ‰ä½¿ç”¨ Gemini çš„ `response_schema` / `response_mime_type` å‚æ•°è¿›è¡Œç»“æ„åŒ–è¾“å‡ºçº¦æŸã€‚                           | ä»…é "è½¯çº¦æŸ"ï¼ˆæç¤ºè¯ï¼‰æ§åˆ¶æ ¼å¼ï¼Œä¸å¦‚"ç¡¬çº¦æŸ"ï¼ˆAPI å±‚ schemaï¼‰å¯é ã€‚          |

---

### ğŸ’¡ æ”¹è¿›æ–¹å‘å»ºè®® (Optimization Roadmap)

ä»¥ä¸‹ä¸ºå¾…è®¨è®ºçš„ä¼˜åŒ–æ–¹å‘ï¼Œä¸ç«‹å³ä¿®æ”¹ï¼š

| #    | ä¼˜åŒ–é¡¹                   | æè¿°                                                                                                                | ä¼˜å…ˆçº§ | çŠ¶æ€     |
| :--- | :----------------------- | :------------------------------------------------------------------------------------------------------------------ | :----- | :------- |
| 1    | **å¢åŠ  Long/Short ç¤ºä¾‹** | å†æä¾›ä¸€ä¸ª `"signal": "Long"` çš„å®Œæ•´ One-Shotï¼Œè®© LLM çŸ¥é“"å¤§è¡Œæƒ…æ¥äº†æ•¢å‡ºæ‰‹"ã€‚                                      | P1     | ğŸŸ¡ å¾…è®¨è®º |
| 2    | **æ·»åŠ è´Ÿçº¦æŸç¤ºä¾‹**       | æ˜ç¡®è¯´æ˜"ä»¥ä¸‹æ ¼å¼æ˜¯é”™è¯¯çš„ï¼š\`\`\`json {...}\`\`\`"ï¼Œé˜²æ­¢ LLM è¾“å‡ºå¸¦ Markdown æ ‡è®°çš„ JSONã€‚                          | P1     | ğŸŸ¡ å¾…è®¨è®º |
| 3    | **ç®€åŒ– tactics ç»“æ„**    | è€ƒè™‘æ‰å¹³åŒ–ä¸ºæ•°ç»„ï¼Œæˆ–å‡å°‘å¿…å¡«å­—æ®µï¼Œé™ä½ LLM è®¤çŸ¥è´Ÿæ‹…å’Œ JSON æˆªæ–­é£é™©ã€‚                                               | P2     | ğŸŸ¡ å¾…è®¨è®º |
| 4    | **æ— è”ç½‘æ—¶çš„ fallback**  | æ·»åŠ æŒ‡ä»¤"å¦‚æœæ— æ³•æœç´¢æ–°é—»ï¼Œè¯·åœ¨ `news_analysis` ä¸­æ³¨æ˜'æ— æ³•è·å–å®æ—¶æ–°é—»'"ï¼Œè€Œéç•™ç©ºæˆ–ç¼–é€ ã€‚                         | P1     | ğŸŸ¡ å¾…è®¨è®º |
| 5    | **åˆ©ç”¨ API å±‚ Schema**   | å¦‚æœ LLM Provider æ”¯æŒï¼ˆå¦‚ Vertex AI çš„ Geminiï¼‰ï¼Œå¯ç”¨ `response_mime_type: application/json` + `response_schema`ã€‚ | P2     | ğŸŸ¡ å¾…è®¨è®º |
| 6    | **æ™ºèƒ½æˆªæ–­å…¬å¸ç®€ä»‹**     | å°† `desc[:100]` æ”¹ä¸ºæŒ‰å¥å­è¾¹ç•Œæˆªæ–­ï¼Œé¿å…äº§ç”ŸåŠå¥è¯ã€‚                                                                | P3     | ğŸŸ¡ å¾…è®¨è®º |
| 7    | **ç»Ÿä¸€ Prompt è¯­è¨€**     | å°†æœ«å°¾çš„è‹±æ–‡çº¦æŸæ”¹ä¸ºä¸­æ–‡ï¼Œæˆ–å°†æ•´ä½“ Prompt ç»Ÿä¸€ä¸ºè‹±æ–‡ï¼Œå‡å°‘åŒè¯­åˆ‡æ¢è´Ÿæ‹…ã€‚                                            | P3     | ğŸŸ¡ å¾…è®¨è®º |

---

### ğŸ“Š å½“å‰è¯„ä¼°ç»“è®º

> **æ€»ä½“è¯„ä»·**: è¿™æ˜¯ä¸€ä»½ **å·¥ç¨‹è´¨é‡ç›¸å½“é«˜** çš„æç¤ºè¯ï¼Œç»“æ„æ¸…æ™°ã€æ•°æ®ä¸°å¯Œã€çº¦æŸæ˜ç¡®ã€‚  
> **ä¸»è¦é£é™©**: "ç¤ºä¾‹åå‘å•ä¸€ä¿¡å·"å’Œ"å¯¹è”ç½‘èƒ½åŠ›çš„éšå¼å‡è®¾"ã€‚  
> **å½“å‰çŠ¶æ€**: åœ¨ Gemini 3 Flash + é‡è¯•æœºåˆ¶çš„ç»„åˆä¸‹å·²èƒ½ç¨³å®šè¿è¡Œï¼Œä¸Šè¿°æ”¹è¿›å¯è¿›ä¸€æ­¥æå‡é²æ£’æ€§å’Œè¾“å‡ºå¤šæ ·æ€§ã€‚

---

### å·¥å…·ä½¿ç”¨

ä½¿ç”¨ `generate_prompt_debug.py` ç”Ÿæˆå®Œæ•´ Promptï¼š

```bash
cd backend
python generate_prompt_debug.py 02171
```

è¾“å‡ºå¯ç›´æ¥å¤åˆ¶åˆ° Gemini / DeepSeek Chat è¿›è¡Œæµ‹è¯•ã€‚
