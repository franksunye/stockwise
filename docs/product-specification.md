# StockWise MVP 产品规格

> **交易者的 HUD (抬头显示器)** —— 不做预测涨跌的水晶球，做执行纪律的条件反射训练器。

---

## 🎯 核心理念

**设计标准**：如果一个功能让用户需要思考超过 3 秒，**砍掉它**。

---

## 🛠️ 技术栈

| 层级 | 技术选型 |
|------|----------|
| 前端 | Next.js 14 (PWA) |
| 部署 | Vercel |
| 数据库 | Turso (libSQL) |
| 数据管道 | Python + GitHub Actions |

---

## 📊 数据层

### 运行机制

GitHub Actions 每日 **18:00 (UTC+8)** 自动触发

### 数据表：`daily_prices`

| 字段 | 类型 | 说明 |
|------|------|------|
| `symbol` | TEXT | 股票代码 (PK) |
| `date` | TEXT | 日期 (PK) |
| `close` | REAL | 收盘价 |
| `ma20` | REAL | 20日均线 |
| `rsi` | REAL | RSI (14) |
| `volume` | REAL | 成交量 |
| `ai_comment` | TEXT | 智能点评 (≤50字) |

---

## 📱 应用层模块

### A. 参数锚点 (Settings)

> 规则的制定 —— 用户的"冷静期"操作

**存储**：LocalStorage (无需登录)

| 输入项 | 必填 | 示例 |
|--------|------|------|
| 止损/支撑位 | ✅ | 14.78 |
| 压力/突破位 | ❌ | 15.80 |
| 最低量能要求 | ❌ | 500万 |

---

### B. 决策看板 (HUD)

> 执行的时刻 —— 单屏卡片流

**信号算法**

| 信号 | 条件 |
|------|------|
| 🟢 **买入/持有** | 现价 > 支撑位 (且 > 压力位，若有) |
| 🔴 **卖出/止损** | 现价 < 支撑位 |
| 🟡 **观望** | 现价夹在支撑与压力之间，或量能不足 |

**UI 组成**

1. 状态栏：代码 \| 现价 \| 涨跌幅
2. 信号红绿灯
3. AI 点评卡片
4. FAB 截图分析按钮

---

### C. 智能复盘 (Review)

> 顿悟的瞬间 —— 每日对比"昨日决策"与"今日结果"

| 场景 | 展示文案 |
|------|----------|
| 昨日提示卖出，今日跌了 | ✅ **"纪律执行成功！避险幅度：X%"** |
| 昨日提示买入，今日跌了 | ❌ **"策略失效。当前浮亏 -X%。请检查支撑位设定。"** |

---

### D. 视觉分析 (Photo Analysis)

> AI 辅助 —— K线截图智能分析

**API**：`/api/analyze`

**Prompt 策略**：*"你是一个严格的风控官。识别图中趋势、均线形态。如果跌破关键位，只回一个字：跑。并附带简短理由。"*

---

## 🚀 开发路线图

| 优先级 | 里程碑 | 说明 |
|--------|--------|------|
| **P0** | 数据管道 | Python 脚本 + Turso 写入 |
| **P1** | HUD 骨架 | 显示现价 + 红绿灯 (硬编码) |
| **P2** | 规则引擎 | LocalStorage 动态规则 |
| **P3** | 复盘闭环 | 计算避险收益 |
| **P4** | PWA + AI | Manifest 配置 + 图片分析 |

---

*文档版本: MVP v1.0 | 更新日期: 2024-12-22*
